# Microblogging full stack app

This is a microblogging service where users can create accounts and login to existing ones to view other users posts and make their own posts up to 500 symbols for others to see. Created accounts and blogposts are stored in mongoDB atlas. Only logged in users can view the page where all the blogposts are.

App was made for Web Applications course to practice creating full stack app with mongo, express, react and node.

Live on heroku: https://microblogger-mern.herokuapp.com/

## Installation

To get this app running locally you need to first change the mongoose connection string to your own from "server.js" line 12.
Also add your own JWT secret key to "/routes/user.js" line 32
Then you must install packages from root and client folder and after that you can run the script "npm run dev" from root folder to start the app.

```bash
npm init
cd client
npm init
cd ..
npm run dev
```

## API

### Authentication

```
POST /user/login
```

- Used for authenticating users by checking if theres a match in the database

- Excepts 'username' and 'password' in body of the request.

- Successful authentication returns status 200 and token generated by JWT

- 401 status with error message if authentication fails

```
POST /user/register
```

- Used for storing users and hashed passwords in the database

- Excepts 'username' and 'password' in body of the request.

- 201 status if signing new account was successful

- 409 status with error message if given username is already in the database

- 500 status with error message if something goes wrong with bcryptjs hashing or storing data to database

### Fetching and storing posts

These routes use authentication middleware(/middleware/check-auth.js) that excepts to get JWT token in the headers of the incoming request. If valid token is provided it attaches 'userData' property with the decoded token as value. If not then response is sent with 401 status and error message.

```
GET /posts
```

- Used for fetching posts from the database
- Sends status 200 with 'loggedUser' and 'posts' if successful

```
POST /posts
```

- Used for creating new posts to database

- excepts 'post' in body of request

- status 200 if successful, status 400 with 'error' if something went wrong with database
